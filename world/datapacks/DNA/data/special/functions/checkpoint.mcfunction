execute as @e[tag=stage,type=armor_stand] at @s run spawnpoint @a[distance=..1,tag=!nocheckpoint] ~ ~1 ~ ~
execute as @e[tag=stage,type=armor_stand] at @s if entity @p[distance=..1,tag=!nocheckpoint] run tag @s add true
execute as @e[tag=stage,type=armor_stand,tag=true,tag=!trued] at @s run particle minecraft:totem_of_undying ~ ~ ~ 0.1 0.1 0.1 1 30 normal
execute as @e[tag=stage,type=armor_stand,tag=true,tag=!trued] at @s run playsound minecraft:entity.arrow.hit_player ambient @a ~ ~ ~ 1 1 0
execute as @e[tag=stage,type=armor_stand,tag=true,tag=!trued] at @s run tag @s add trued
execute as @e[tag=stage,type=armor_stand,tag=true] at @s unless entity @p[distance=..1] run tag @s remove true
execute as @e[tag=stage,type=armor_stand,tag=trued] at @s unless entity @p[distance=..1] run tag @s remove trued

execute as @e[tag=stage,type=armor_stand,tag=1] at @s run scoreboard players set @a[distance=..1] Stage 1
execute as @e[tag=stage,type=armor_stand,tag=2] at @s run scoreboard players set @a[distance=..1] Stage 2
execute as @e[tag=stage,type=armor_stand,tag=3] at @s run scoreboard players set @a[distance=..1] Stage 3
execute as @e[tag=stage,type=armor_stand,tag=4] at @s run scoreboard players set @a[distance=..1] Stage 4
execute as @e[tag=stage,type=armor_stand,tag=5] at @s run scoreboard players set @a[distance=..1] Stage 5
execute as @e[tag=stage,type=armor_stand,tag=6] at @s run scoreboard players set @a[distance=..1] Stage 6
execute as @e[tag=stage,type=armor_stand,tag=7] at @s run scoreboard players set @a[distance=..1] Stage 7
execute as @e[tag=stage,type=armor_stand,tag=8] at @s run scoreboard players set @a[distance=..1] Stage 8
execute as @e[tag=stage,type=armor_stand,tag=9] at @s run scoreboard players set @a[distance=..1] Stage 9
execute as @e[tag=stage,type=armor_stand,tag=10] at @s run scoreboard players set @a[distance=..1] Stage 10
execute as @e[tag=stage,type=armor_stand,tag=11] at @s run scoreboard players set @a[distance=..1] Stage 11
execute as @e[tag=stage,type=armor_stand,tag=12] at @s run scoreboard players set @a[distance=..1] Stage 12
execute as @e[tag=stage,type=armor_stand,tag=13] at @s run scoreboard players set @a[distance=..1] Stage 13
execute as @e[tag=stage,type=armor_stand,tag=14] at @s run scoreboard players set @a[distance=..1] Stage 14
execute as @e[tag=stage,type=armor_stand,tag=15] at @s run scoreboard players set @a[distance=..1] Stage 15
execute as @e[tag=stage,type=armor_stand,tag=16] at @s run scoreboard players set @a[distance=..1] Stage 16
execute as @e[tag=stage,type=armor_stand,tag=17] at @s run scoreboard players set @a[distance=..1] Stage 17
execute as @e[tag=stage,type=armor_stand,tag=18] at @s run scoreboard players set @a[distance=..1] Stage 18
execute as @e[tag=stage,type=armor_stand,tag=19] at @s run scoreboard players set @a[distance=..1] Stage 19
execute as @e[tag=stage,type=armor_stand,tag=20] at @s run scoreboard players set @a[distance=..1] Stage 20
execute as @e[tag=stage,type=armor_stand,tag=21] at @s run scoreboard players set @a[distance=..1] Stage 21
execute as @e[tag=stage,type=armor_stand,tag=22] at @s run scoreboard players set @a[distance=..1] Stage 22
execute as @e[tag=stage,type=armor_stand,tag=23] at @s run scoreboard players set @a[distance=..1] Stage 23
execute as @e[tag=stage,type=armor_stand,tag=24] at @s run scoreboard players set @a[distance=..1] Stage 24
execute as @e[tag=stage,type=armor_stand,tag=25] at @s run scoreboard players set @a[distance=..1] Stage 25
execute as @e[tag=stage,type=armor_stand,tag=26] at @s run scoreboard players set @a[distance=..1] Stage 26
execute as @e[tag=stage,type=armor_stand,tag=27] at @s run scoreboard players set @a[distance=..1] Stage 27
execute as @e[tag=stage,type=armor_stand,tag=28] at @s run scoreboard players set @a[distance=..1] Stage 28
execute as @e[tag=stage,type=armor_stand,tag=29] at @s run scoreboard players set @a[distance=..1] Stage 29
execute as @e[tag=stage,type=armor_stand,tag=30] at @s run scoreboard players set @a[distance=..1] Stage 30
execute as @e[tag=stage,type=armor_stand,tag=31] at @s run scoreboard players set @a[distance=..1] Stage 31
execute as @e[tag=stage,type=armor_stand,tag=32] at @s run scoreboard players set @a[distance=..1] Stage 32
execute as @e[tag=stage,type=armor_stand,tag=33] at @s run scoreboard players set @a[distance=..1] Stage 33
execute as @e[tag=stage,type=armor_stand,tag=34] at @s run scoreboard players set @a[distance=..1] Stage 34
execute as @e[tag=stage,type=armor_stand,tag=35] at @s run scoreboard players set @a[distance=..1] Stage 35
execute as @e[tag=stage,type=armor_stand,tag=36] at @s run scoreboard players set @a[distance=..1] Stage 36
execute as @e[tag=stage,type=armor_stand,tag=37] at @s run scoreboard players set @a[distance=..1] Stage 37
execute as @e[tag=stage,type=armor_stand,tag=38] at @s run scoreboard players set @a[distance=..1] Stage 38
execute as @e[tag=stage,type=armor_stand,tag=39] at @s run scoreboard players set @a[distance=..1] Stage 39
execute as @e[tag=stage,type=armor_stand,tag=40] at @s run scoreboard players set @a[distance=..1] Stage 40
execute as @e[tag=stage,type=armor_stand,tag=41] at @s run scoreboard players set @a[distance=..1] Stage 41
execute as @e[tag=stage,type=armor_stand,tag=42] at @s run scoreboard players set @a[distance=..1] Stage 42
execute as @e[tag=stage,type=armor_stand,tag=43] at @s run scoreboard players set @a[distance=..1] Stage 43
execute as @e[tag=stage,type=armor_stand,tag=44] at @s run scoreboard players set @a[distance=..1] Stage 44
execute as @e[tag=stage,type=armor_stand,tag=45] at @s run scoreboard players set @a[distance=..1] Stage 45
execute as @e[tag=stage,type=armor_stand,tag=46] at @s run scoreboard players set @a[distance=..1] Stage 46
execute as @e[tag=stage,type=armor_stand,tag=47] at @s run scoreboard players set @a[distance=..1] Stage 47
execute as @e[tag=stage,type=armor_stand,tag=48] at @s run scoreboard players set @a[distance=..1] Stage 48
execute as @e[tag=stage,type=armor_stand,tag=49] at @s run scoreboard players set @a[distance=..1] Stage 49
execute as @e[tag=stage,type=armor_stand,tag=50] at @s run scoreboard players set @a[distance=..1] Stage 50
execute as @e[tag=stage,type=armor_stand,tag=51] at @s run scoreboard players set @a[distance=..1] Stage 51
execute as @e[tag=stage,type=armor_stand,tag=52] at @s run scoreboard players set @a[distance=..1] Stage 52
execute as @e[tag=stage,type=armor_stand,tag=53] at @s run scoreboard players set @a[distance=..1] Stage 53
execute as @e[tag=stage,type=armor_stand,tag=54] at @s run scoreboard players set @a[distance=..1] Stage 54
execute as @e[tag=stage,type=armor_stand,tag=55] at @s run scoreboard players set @a[distance=..1] Stage 55
execute as @e[tag=stage,type=armor_stand,tag=56] at @s run scoreboard players set @a[distance=..1] Stage 56
execute as @e[tag=stage,type=armor_stand,tag=57] at @s run scoreboard players set @a[distance=..1] Stage 57
execute as @e[tag=stage,type=armor_stand,tag=58] at @s run scoreboard players set @a[distance=..1] Stage 58
execute as @e[tag=stage,type=armor_stand,tag=59] at @s run scoreboard players set @a[distance=..1] Stage 59
execute as @e[tag=stage,type=armor_stand,tag=60] at @s run scoreboard players set @a[distance=..1] Stage 60
execute as @e[tag=stage,type=armor_stand,tag=61] at @s run scoreboard players set @a[distance=..1] Stage 61
execute as @e[tag=stage,type=armor_stand,tag=62] at @s run scoreboard players set @a[distance=..1] Stage 62
execute as @e[tag=stage,type=armor_stand,tag=63] at @s run scoreboard players set @a[distance=..1] Stage 63
execute as @e[tag=stage,type=armor_stand,tag=64] at @s run scoreboard players set @a[distance=..1] Stage 64
execute as @e[tag=stage,type=armor_stand,tag=65] at @s run scoreboard players set @a[distance=..1] Stage 65
execute as @e[tag=stage,type=armor_stand,tag=66] at @s run scoreboard players set @a[distance=..1] Stage 66
execute as @e[tag=stage,type=armor_stand,tag=67] at @s run scoreboard players set @a[distance=..1] Stage 67
execute as @e[tag=stage,type=armor_stand,tag=68] at @s run scoreboard players set @a[distance=..1] Stage 68
execute as @e[tag=stage,type=armor_stand,tag=69] at @s run scoreboard players set @a[distance=..1] Stage 69
execute as @e[tag=stage,type=armor_stand,tag=70] at @s run scoreboard players set @a[distance=..1] Stage 70
execute as @e[tag=stage,type=armor_stand,tag=71] at @s run scoreboard players set @a[distance=..1] Stage 71
execute as @e[tag=stage,type=armor_stand,tag=72] at @s run scoreboard players set @a[distance=..1] Stage 72
execute as @e[tag=stage,type=armor_stand,tag=73] at @s run scoreboard players set @a[distance=..1] Stage 73
execute as @e[tag=stage,type=armor_stand,tag=74] at @s run scoreboard players set @a[distance=..1] Stage 74
execute as @e[tag=stage,type=armor_stand,tag=75] at @s run scoreboard players set @a[distance=..1] Stage 75
execute as @e[tag=stage,type=armor_stand,tag=76] at @s run scoreboard players set @a[distance=..1] Stage 76
execute as @e[tag=stage,type=armor_stand,tag=77] at @s run scoreboard players set @a[distance=..1] Stage 77
execute as @e[tag=stage,type=armor_stand,tag=78] at @s run scoreboard players set @a[distance=..1] Stage 78
execute as @e[tag=stage,type=armor_stand,tag=79] at @s run scoreboard players set @a[distance=..1] Stage 79
execute as @e[tag=stage,type=armor_stand,tag=80] at @s run scoreboard players set @a[distance=..1] Stage 80
execute as @e[tag=stage,type=armor_stand,tag=81] at @s run scoreboard players set @a[distance=..1] Stage 81
execute as @e[tag=stage,type=armor_stand,tag=82] at @s run scoreboard players set @a[distance=..1] Stage 82
execute as @e[tag=stage,type=armor_stand,tag=83] at @s run scoreboard players set @a[distance=..1] Stage 83
execute as @e[tag=stage,type=armor_stand,tag=84] at @s run scoreboard players set @a[distance=..1] Stage 84
execute as @e[tag=stage,type=armor_stand,tag=85] at @s run scoreboard players set @a[distance=..1] Stage 85
execute as @e[tag=stage,type=armor_stand,tag=86] at @s run scoreboard players set @a[distance=..1] Stage 86
execute as @e[tag=stage,type=armor_stand,tag=87] at @s run scoreboard players set @a[distance=..1] Stage 87
execute as @e[tag=stage,type=armor_stand,tag=88] at @s run scoreboard players set @a[distance=..1] Stage 88
execute as @e[tag=stage,type=armor_stand,tag=89] at @s run scoreboard players set @a[distance=..1] Stage 89
execute as @e[tag=stage,type=armor_stand,tag=90] at @s run scoreboard players set @a[distance=..1] Stage 90
execute as @e[tag=stage,type=armor_stand,tag=91] at @s run scoreboard players set @a[distance=..1] Stage 91
execute as @e[tag=stage,type=armor_stand,tag=92] at @s run scoreboard players set @a[distance=..1] Stage 92
execute as @e[tag=stage,type=armor_stand,tag=93] at @s run scoreboard players set @a[distance=..1] Stage 93
execute as @e[tag=stage,type=armor_stand,tag=94] at @s run scoreboard players set @a[distance=..1] Stage 94
execute as @e[tag=stage,type=armor_stand,tag=95] at @s run scoreboard players set @a[distance=..1] Stage 95
execute as @e[tag=stage,type=armor_stand,tag=96] at @s run scoreboard players set @a[distance=..1] Stage 96
execute as @e[tag=stage,type=armor_stand,tag=97] at @s run scoreboard players set @a[distance=..1] Stage 97
execute as @e[tag=stage,type=armor_stand,tag=98] at @s run scoreboard players set @a[distance=..1] Stage 98
execute as @e[tag=stage,type=armor_stand,tag=99] at @s run scoreboard players set @a[distance=..1] Stage 99
execute as @e[tag=stage,type=armor_stand,tag=100] at @s run scoreboard players set @a[distance=..1] Stage 100