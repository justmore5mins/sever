execute as @a[tag=halfheartalways,gamemode=adventure] run tag @s add half_heart

execute as @a[tag=30s] at @s if entity @e[tag=stage,type=armor_stand,distance=..1] run scoreboard players set @s 30s 30
execute as @a[tag=30s,tag=time_run] run scoreboard players add @s 30stick 1
execute as @a[scores={30stick=20..}] run scoreboard players remove @s 30s 1
execute as @a[scores={30stick=20..}] run scoreboard players remove @s 30stick 20


execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_sec=0..,30s=11..30}] unless entity @s[scores={time_min=1..,time_hour=1..}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#31D100","bold":true},{"text":"s","color":"#31D100","bold":true}]

execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_sec=0..,30s=4..10}] unless entity @s[scores={time_min=1..,time_hour=1..}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#E5FF00","bold":true},{"text":"s","color":"#E5FF00","bold":true}]

execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_sec=0..,30s=..3}] unless entity @s[scores={time_min=1..,time_hour=1..}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#CC0000","bold":true},{"text":"s","color":"#CC0000","bold":true}]



execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_min=1..,30s=11..30}] unless entity @s[scores={time_hour=1..}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_min"},"color":"#FF9F00"},{"text":"m, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#31D100","bold":true},{"text":"s","color":"#31D100","bold":true}]

execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_min=1..,30s=4..10}] unless entity @s[scores={time_hour=1..}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_min"},"color":"#FF9F00"},{"text":"m, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#E5FF00","bold":true},{"text":"s","color":"#E5FF00","bold":true}]

execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_min=1..,30s=..3}] unless entity @s[scores={time_hour=1..}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_min"},"color":"#FF9F00"},{"text":"m, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#CC0000","bold":true},{"text":"s","color":"#CC0000","bold":true}]



execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_hour=1..,30s=11..30}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_hour"},"color":"#FF9F00"},{"text":"h, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_min"},"color":"#FF9F00"},{"text":"m, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#31D100","bold":true},{"text":"s","color":"#31D100","bold":true}]

execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_hour=1..,30s=4..10}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_hour"},"color":"#FF9F00"},{"text":"h, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_min"},"color":"#FF9F00"},{"text":"m, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#E5FF00","bold":true},{"text":"s","color":"#E5FF00","bold":true}]

execute as @a[tag=time_display] unless entity @s[tag=busy] if entity @s[tag=30s] if entity @s[scores={time_hour=1..,30s=..3}] run title @s actionbar ["",{"score":{"name":"@s","objective":"time_hour"},"color":"#FF9F00"},{"text":"h, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_min"},"color":"#FF9F00"},{"text":"m, ","color":"#FF9F00"},{"score":{"name":"@s","objective":"time_sec"},"color":"#FF9F00"},{"text":"s","color":"#FF9F00"},{"text":" |","bold":true,"color":"#FFD300"},{"text":" Stage: ","color":"#FF7F00"},{"score":{"name":"@s","objective":"Stage"},"color":"#FF7F00"},{"text":"/","color":"#FF7F00"},{"score":{"name":"0","objective":"cp_set"},"color":"#FF7F00"},{"text":" | ","color":"#FFD500","bold":true},{"score":{"name":"@s","objective":"30s"},"color":"#CC000","bold":true},{"text":"s","color":"#CC0000","bold":true}]


execute as @a[tag=30s,scores={30s=0}] run kill @s